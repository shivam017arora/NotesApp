{"ast":null,"code":"import _objectSpread from\"/Users/shivamarora/Desktop/notes_app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/shivamarora/Desktop/notes_app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shivamarora/Desktop/notes_app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/shivamarora/Desktop/notes_app/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var params=useParams();var navigate=useNavigate();var id=params.id;//ID from the URL\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(id==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/note/\".concat(id));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();useEffect(function(){getNote();},[setNote]);var updateNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/note/\".concat(id,\"/update\"),{method:\"PUT\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function updateNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/create\",{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function createNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/note/\".concat(id,\"/delete\"),{method:\"DELETE\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken}});navigate('/');case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(id!=='new'&&note.body===''){deleteNote();}else if(id!=='new'){updateNote();}else if(id==='new'&&note!==null){createNote();}navigate('/');};var handleChange=function handleChange(e){setNote(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{body:e.target.value});});};//SOME VANiLLA JS FOR CSRF TOKEN\nfunction getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}var csrftoken=getCookie('csrftoken');return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",onClick:handleSubmit,children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",/*#__PURE__*/_jsx(ArrowLeft,{}),\" \"]}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:note===null||note===void 0?void 0:note.body,onChange:handleChange})]});};export default NotePage;","map":{"version":3,"sources":["/Users/shivamarora/Desktop/notes_app/frontend/src/pages/NotePage.js"],"names":["React","useState","useEffect","useParams","ReactComponent","ArrowLeft","Link","useNavigate","NotePage","params","navigate","id","note","setNote","getNote","fetch","response","json","data","updateNote","method","headers","csrftoken","body","JSON","stringify","createNote","deleteNote","handleSubmit","handleChange","e","prevState","target","value","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","jQuery","trim","substring","decodeURIComponent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\nimport { Link, useNavigate } from 'react-router-dom'\n\nconst NotePage = () => {\n\n    let params = useParams()\n    let navigate = useNavigate()\n    let id = params.id //ID from the URL\n    let [note, setNote] = useState(null)\n\n    const getNote = async () => {\n        if (id === 'new') return;\n        let response = await fetch(`/api/note/${id}`);\n        let data = await response.json()\n        setNote(data)\n    }\n\n    useEffect(() => {\n        getNote()\n    }, [setNote]);\n\n    let updateNote = async () => {\n        fetch(`/api/note/${id}/update`, {\n            method: \"PUT\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            },\n            body: JSON.stringify(note)\n        })\n    }\n\n    let createNote = async () => {\n        fetch(`/api/notes/create`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            },\n            body: JSON.stringify(note)\n        })\n    }\n\n    let deleteNote = async () => {\n        fetch(`/api/note/${id}/delete`, {\n            method: \"DELETE\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            },\n        })\n        navigate('/')\n    }\n\n    let handleSubmit = () => {\n        if (id !== 'new' && note.body === '') {\n            deleteNote()\n        } else if (id !== 'new') {\n            updateNote()\n        } else if (id === 'new' && note !== null) {\n            createNote()\n        }\n        navigate('/')\n    }\n\n    let handleChange = (e) => {\n        setNote((prevState) => ({\n            ...prevState,\n            body: e.target.value,\n        }))\n    }\n\n    //SOME VANiLLA JS FOR CSRF TOKEN\n    function getCookie(name) {\n        var cookieValue = null;\n        if (document.cookie && document.cookie !== '') {\n            var cookies = document.cookie.split(';');\n            for (var i = 0; i < cookies.length; i++) {\n                var cookie = jQuery.trim(cookies[i]);\n                if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                    break;\n                }\n            }\n        }\n        return cookieValue;\n    }\n    let csrftoken = getCookie('csrftoken');\n\n    return (\n        <div className='note'>\n            <div className='note-header' onClick={handleSubmit}>\n                <h3> <ArrowLeft /> </h3>\n                {id !== 'new' ? (\n                    <button onClick={deleteNote}>Delete</button>\n                ) : (\n                    <button>Done</button>\n                )}\n\n            </div>\n            <textarea value={note?.body} onChange={handleChange}></textarea>\n        </div>\n    )\n}\n\nexport default NotePage"]},"metadata":{},"sourceType":"module"}